fun sync -> (* instrumentation *)

let rec f n {} =
  sync ();                    (* this line is instrumentation *)
  if n <= 1 then ()
  else (
    sync ();                    (* this line is instrumentation *)
    if (n <= 2) then () else f(n - 2)
  )
in f
|||

fun sync -> (* instrumentation *)

let rec f n =
  sync ();                    (* this line is instrumentation *)
  if n <= 1 then ()
  else f(n-2)
in f